# V9.49 - Quick Reference Guide

## üéØ Cosa √® stato implementato

### 1. ‚úÖ Checkbox Allenamenti Verde (Gi√† implementato in V9.6)
- I checkbox nelle sessioni di allenamento sono gi√† verdi
- Nessuna modifica necessaria

### 2. ‚úÖ Tema Dark/Light sulla Login Page
**Dove trovarlo:**
- Icona in alto a destra sulla schermata di login
- Icona luna üåô = attiva dark mode
- Icona sole ‚òÄÔ∏è = attiva light mode

**Come funziona:**
- Click sull'icona per cambiare tema
- Il tema viene salvato automaticamente
- Al prossimo accesso, il tema scelto viene caricato automaticamente

### 3. ‚úÖ Cambio Password per Mister/Dirigente
**Dove trovarlo:**
- Schermata di inserimento password (quando clicchi "Entra come Mister" o "Entra come Dirigente")
- Button giallo "üîë Cambia Password" sotto i pulsanti Conferma/Annulla

**Come funziona:**
1. Click su "üîë Cambia Password"
2. Si apre una modale con 3 campi:
   - Password Attuale
   - Nuova Password
   - Conferma Nuova Password
3. Compila i campi
4. Click su "Salva"
5. La password viene aggiornata su Firebase (o localStorage in demo mode)
6. Ricevi una notifica di successo/fallimento

**Validazioni:**
- Tutti i campi sono obbligatori
- La nuova password deve coincidere con la conferma
- La password deve essere di almeno 6 caratteri
- La password attuale deve essere corretta

---

## üìù Per gli Sviluppatori

### Codice Dark Mode
```javascript
// Salvare tema
localStorage.setItem('theme', 'dark'); // o 'light'

// Caricare tema
const theme = localStorage.getItem('theme');
if (theme === 'dark') {
    document.body.classList.add('dark-mode');
}
```

### Codice Cambio Password (Firebase)
```javascript
// Aggiornare password su Firebase
await updateDoc(doc(db, 'societa', companyDocumentId), {
    'config.misterPassword': newPassword  // o 'config.dirigentePassword'
});
```

### Codice Cambio Password (Demo Mode)
```javascript
// Aggiornare password in demo mode
currentCompanyData.passwords[role] = newPassword;
localStorage.setItem('companyData', JSON.stringify(currentCompanyData));
```

---

## üß™ Come Testare

### Test Tema Dark/Light
1. Apri la pagina di login
2. Verifica che l'icona sia visibile in alto a destra
3. Click sull'icona
4. Verifica che il tema cambi
5. Ricarica la pagina
6. Verifica che il tema sia stato mantenuto

### Test Cambio Password
1. Inserisci codice societ√† (es. "DEMO")
2. Click su "Entra come Mister"
3. Verifica che il button "üîë Cambia Password" sia visibile
4. Click sul button
5. Prova varie combinazioni:
   - Campi vuoti ‚Üí Errore "Tutti i campi sono obbligatori"
   - Password diverse ‚Üí Errore "Le nuove password non coincidono"
   - Password corta ‚Üí Errore "La password deve essere di almeno 6 caratteri"
   - Password attuale sbagliata ‚Üí Errore "Password attuale non corretta"
   - Password corretta ‚Üí Successo "Password cambiata con successo!"

---

## üé® Design

### Colori Dark Mode
- Background body: `#1f2937`
- Background card: `#374151`
- Background inputs: `#4b5563`
- Testo principale: `#e5e7eb`
- Testo secondario: `#d1d5db`
- Testo terziario: `#9ca3af`

### Button Cambio Password
- Colore: Giallo (`bg-yellow-600`)
- Hover: Giallo scuro (`bg-yellow-700`)
- Icona: üîë

---

## üì¶ Files Modificati

1. **index.html**
   - Aggiunto CSS dark mode (~450 linee)
   - Aggiunto theme toggle button (~500 linee)
   - Aggiunto button cambio password (~632 linee)
   - Aggiunta modal cambio password (~636 linee)
   - Aggiunta logica theme toggle (~2161 linee)
   - Aggiunta logica cambio password demo mode (~2551 linee)
   - Modificata showPasswordEntry demo mode (~2404 linee)
   - Modificata showPasswordEntry main mode (~7588 linee)
   - Aggiunta logica cambio password main mode (~10789 linee)

2. **manifest.json**
   - Versione aggiornata: V9.48 ‚Üí V9.49

3. **CHANGELOG_V9.49.md**
   - Documentazione completa delle modifiche

---

## ‚ö° Note Importanti

1. **Demo Mode vs Production Mode**
   - Demo mode: Password salvata in localStorage
   - Production mode: Password salvata su Firebase

2. **Sicurezza**
   - Le password non vengono mai mostrate in chiaro
   - La password attuale viene verificata prima di aggiornarla
   - Validazioni lato client per migliorare UX
   - Validazioni lato server necessarie per sicurezza

3. **Compatibilit√†**
   - Dark mode funziona su tutti i browser moderni
   - localStorage supportato da tutti i browser moderni
   - Firebase richiede connessione internet

---

**Versione:** V9.49  
**Data:** 2024-01-09  
**Stato:** ‚úÖ PRONTO PER IL DEPLOYMENT
