<!DOCTYPE html>
<!-- Test file for V9.54 changes - Allenamenti UI improvements -->
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test V9.54 - Allenamenti UI Improvements</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .presence-count {
            display: inline-block;
        }
        
        .top-player-badge {
            font-size: 0.7em;
            margin-left: 4px;
            vertical-align: middle;
        }
        
        .player-name-clickable {
            cursor: pointer;
            color: #3b82f6;
            text-decoration: underline;
        }
        
        .player-name-clickable:hover {
            color: #2563eb;
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="bg-white rounded-2xl shadow-xl p-6 max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-6">Test V9.54 - Allenamenti UI Improvements</h1>

        <!-- Version Badge -->
        <div class="text-center mb-8">
            <span class="inline-block text-sm font-semibold text-gray-500 bg-gray-100 px-3 py-1 rounded-full">V 9.54</span>
        </div>

        <!-- Changes Summary -->
        <div class="bg-blue-50 border-l-4 border-blue-400 p-6 mb-8 rounded-lg">
            <h2 class="text-xl font-semibold text-blue-800 mb-4">‚ú® V9.54 Changes Summary</h2>
            <ul class="list-disc ml-6 space-y-2 text-blue-700">
                <li><strong>Removed:</strong> üèÉ icon from "Allenamenti" button on welcome page</li>
                <li><strong>Removed:</strong> üèÉ icon from "Gestione Allenamenti" page title</li>
                <li><strong>NEW:</strong> Animated presence count numbers in Allenamenti report table</li>
                <li><strong>Animation:</strong> Same as average attendance (1.5s count-up from 0 to target)</li>
                <li><strong>Updated:</strong> Version to V9.54 in index.html and manifest.json</li>
            </ul>
        </div>

        <!-- Change 1: Button on Welcome Screen -->
        <div class="mb-8 p-6 bg-green-50 rounded-xl border border-green-200">
            <h2 class="text-xl font-semibold text-green-800 mb-4">üìã Modifica 1: Pulsante "Allenamenti" nella schermata di benvenuto</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold mb-3 text-red-600">‚ùå Prima (V9.53):</h3>
                    <button class="w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md">
                        üèÉ Allenamenti
                    </button>
                </div>
                
                <div>
                    <h3 class="font-semibold mb-3 text-green-600">‚úÖ Dopo (V9.54):</h3>
                    <button class="w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md">
                        Allenamenti
                    </button>
                </div>
            </div>
            
            <div class="mt-4 p-4 bg-white rounded-lg">
                <p class="text-sm text-gray-700">
                    <strong>Risultato:</strong> Il pulsante √® ora pi√π pulito e professionale, senza l'emoji üèÉ
                </p>
            </div>
        </div>

        <!-- Change 2: Page Title -->
        <div class="mb-8 p-6 bg-green-50 rounded-xl border border-green-200">
            <h2 class="text-xl font-semibold text-green-800 mb-4">üìã Modifica 2: Titolo pagina "Gestione Allenamenti"</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold mb-3 text-red-600">‚ùå Prima (V9.53):</h3>
                    <h2 class="text-2xl font-bold text-gray-800 text-center p-4 bg-white rounded-lg">
                        üèÉ Gestione Allenamenti
                    </h2>
                </div>
                
                <div>
                    <h3 class="font-semibold mb-3 text-green-600">‚úÖ Dopo (V9.54):</h3>
                    <h2 class="text-2xl font-bold text-gray-800 text-center p-4 bg-white rounded-lg">
                        Gestione Allenamenti
                    </h2>
                </div>
            </div>
            
            <div class="mt-4 p-4 bg-white rounded-lg">
                <p class="text-sm text-gray-700">
                    <strong>Risultato:</strong> Il titolo √® ora pi√π pulito e professionale, senza l'emoji üèÉ
                </p>
            </div>
        </div>

        <!-- Change 3: Animated Presence Counts -->
        <div class="mb-8 p-6 bg-yellow-50 rounded-xl border border-yellow-200">
            <h2 class="text-xl font-semibold text-yellow-800 mb-4">üé¨ Modifica 3: Animazione numeri presenze nella tabella</h2>
            
            <div class="mb-4 p-4 bg-white rounded-lg">
                <h3 class="font-semibold mb-2">Descrizione:</h3>
                <p class="text-sm text-gray-700">
                    I numeri delle presenze nella colonna "Pres." ora si animano con un conteggio da 0 al valore finale, 
                    utilizzando la stessa animazione gi√† implementata per la "Media Presenze Totale" (V9.42).
                </p>
            </div>

            <div class="bg-white rounded-lg overflow-hidden border border-gray-200">
                <div class="bg-gradient-to-r from-teal-500 to-teal-600 p-4">
                    <h3 class="text-lg font-bold text-white">üìä Report Presenze Allenamenti</h3>
                    <p class="text-teal-100 text-sm mt-1">Demo con animazione</p>
                </div>
                
                <div class="p-4">
                    <!-- Average Attendance -->
                    <div class="mb-4 text-center p-3 bg-blue-50 rounded-lg border border-blue-200">
                        <p class="text-sm font-semibold text-blue-800">
                            Media Presenze Totale: <span id="average-display" class="text-lg font-bold text-blue-900">0%</span>
                        </p>
                    </div>

                    <!-- Table -->
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Giocatore</th>
                                <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase">N¬∞ All.</th>
                                <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase">Pres.</th>
                                <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase">% Pres.</th>
                            </tr>
                        </thead>
                        <tbody id="demo-table-body">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>

                    <div class="mt-4 text-center">
                        <button id="animate-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg">
                            üé¨ Avvia Animazione
                        </button>
                    </div>
                </div>
            </div>

            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="p-4 bg-white rounded-lg">
                    <h4 class="font-semibold mb-2 text-sm">Implementazione HTML:</h4>
                    <pre class="text-xs bg-gray-50 p-2 rounded overflow-x-auto"><code>&lt;span class="presence-count" data-target="15"&gt;0&lt;/span&gt;</code></pre>
                </div>
                <div class="p-4 bg-white rounded-lg">
                    <h4 class="font-semibold mb-2 text-sm">Implementazione JavaScript:</h4>
                    <pre class="text-xs bg-gray-50 p-2 rounded overflow-x-auto"><code>animateCountUp(element, targetValue, 1500)</code></pre>
                </div>
            </div>
        </div>

        <!-- Technical Details -->
        <div class="bg-purple-50 border-l-4 border-purple-400 p-6 mb-8 rounded-lg">
            <h2 class="text-xl font-semibold text-purple-800 mb-4">üîß Dettagli Tecnici</h2>
            <div class="space-y-3 text-purple-700">
                <div>
                    <strong>Funzione utilizzata:</strong> <code class="bg-purple-100 px-2 py-1 rounded">animateCountUp(element, targetValue, duration, suffix)</code>
                </div>
                <div>
                    <strong>Durata animazione:</strong> 1500ms (1.5 secondi)
                </div>
                <div>
                    <strong>Effetto:</strong> Easing out quadratico per un'animazione fluida
                </div>
                <div>
                    <strong>Sincronizzazione:</strong> Tutte le animazioni partono insieme dopo il caricamento della tabella
                </div>
                <div>
                    <strong>Compatibilit√†:</strong> Stessa funzione usata per Media Presenze (V9.42) e Progress Bar (V9.40, V9.41)
                </div>
            </div>
        </div>

        <!-- Version Updates -->
        <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">üìù Aggiornamenti Versione</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">index.html (commento)</h3>
                    <p class="text-sm text-gray-600">V9.53 ‚Üí V9.54</p>
                </div>
                <div class="bg-white p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">index.html (badge)</h3>
                    <p class="text-sm text-gray-600">V 9.51 ‚Üí V 9.54</p>
                </div>
                <div class="bg-white p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">manifest.json</h3>
                    <p class="text-sm text-gray-600">V9.50 ‚Üí V9.54</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Demo data
        const demoData = [
            { name: 'Marco Rossi', total: 20, presences: 18, percentage: 90 },
            { name: 'Luca Bianchi', total: 20, presences: 16, percentage: 80 },
            { name: 'Paolo Verdi', total: 20, presences: 15, percentage: 75 },
            { name: 'Andrea Neri', total: 20, presences: 14, percentage: 70 },
            { name: 'Giovanni Gialli', total: 20, presences: 12, percentage: 60 }
        ];

        // animateCountUp function (from main application)
        function animateCountUp(element, targetValue, duration = 1500, suffix = '') {
            if (!element) return;
            
            const startValue = 0;
            const startTime = performance.now();
            
            function updateCount(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function for smooth animation
                const easeOutQuad = progress * (2 - progress);
                const currentValue = Math.floor(startValue + (targetValue - startValue) * easeOutQuad);
                
                element.textContent = currentValue + suffix;
                
                if (progress < 1) {
                    requestAnimationFrame(updateCount);
                } else {
                    element.textContent = targetValue + suffix;
                }
            }
            
            requestAnimationFrame(updateCount);
        }

        // Populate table
        function populateTable() {
            const tbody = document.getElementById('demo-table-body');
            tbody.innerHTML = '';
            
            demoData.forEach((player, index) => {
                const row = document.createElement('tr');
                row.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';
                
                const topPlayerBadge = index === 0 ? '<span class="top-player-badge">üèÜ Top Player</span>' : '';
                const arrowIcon = index === 0 ? '<span style="color: green; margin-left: 4px;">‚ñ≤</span>' : 
                                  index === 1 ? '<span style="color: gray; margin-left: 4px;">=</span>' : 
                                  '<span style="color: red; margin-left: 4px;">‚ñº</span>';
                
                row.innerHTML = `
                    <td class="px-3 py-2 text-sm text-gray-900">
                        <span class="player-name-clickable">${player.name}</span>${topPlayerBadge}
                    </td>
                    <td class="px-3 py-2 text-sm text-gray-900 text-center">${player.total}</td>
                    <td class="px-3 py-2 text-sm text-gray-900 text-center font-semibold">
                        <span class="presence-count" data-target="${player.presences}">0</span>${arrowIcon}
                    </td>
                    <td class="px-3 py-2 text-sm text-gray-900 text-center font-semibold">${player.percentage}%</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Animate all
        function startAnimation() {
            // Reset all counters
            populateTable();
            
            // Animate average
            const averageDisplay = document.getElementById('average-display');
            setTimeout(() => {
                animateCountUp(averageDisplay, 75, 1500, '%');
            }, 100);
            
            // Animate presence counts
            setTimeout(() => {
                const presenceCounts = document.querySelectorAll('.presence-count');
                presenceCounts.forEach(element => {
                    const targetValue = parseInt(element.getAttribute('data-target'));
                    animateCountUp(element, targetValue, 1500);
                });
            }, 100);
        }

        // Initialize
        populateTable();
        
        // Button handler
        document.getElementById('animate-btn').addEventListener('click', startAnimation);
        
        // Auto-start animation after 1 second
        setTimeout(startAnimation, 1000);
    </script>
</body>
</html>
